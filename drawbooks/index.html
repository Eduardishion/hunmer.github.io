<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<title>List of GuideBook of Drawing</title>
	<link rel="stylesheet" type="text/css" href="css/normalize.css" />
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="css/jquery.restable.min.css">
    <link rel="stylesheet" type="text/css" href="css/search-form.css">
<body>
     <form onsubmit="submitFn(this, event);">
            <div class="search-wrapper">
                <div class="input-holder">
                    <input type="text" class="search-input" placeholder="Type to search" oninput="changeKeyword(this)" />
                    <button class="search-icon" onclick="searchToggle(this, event);"><span></span></button>
                </div>
                <span class="close" onclick="searchToggle(this, event);"></span>
                <div class="result-container">

                </div>
            </div>
        </form>
        <div class="container">
            <span class="title">List of GuideBook of Drawing(423)<br><span style="    font-size: 10px;">Sat Jul 11 2020 00:15:02 GMT+0800 (中国标准时间)</span></span>
    <table id="table3">
        <thead>
        <tr>
            <th>ID</th>
            <th>Cover</th>
            <th>Title</th>
            <th>Lang</th>
            <th>Product</th>
            <th>Downloads</th>
        </tr>
        </thead>
        <tbody>
        
      <!--   <tr>
            <td><img src="img/3.png"></td>
            <td>Asdrubale</td>
            <td><a href="#">asdrubale@example.it</a></td>
            <td>
                <p>Nulla molestie vulputate lectus, eu aliquam erat cursus ac. Etiam finibus pellentesque turpis vitae
                    lacinia.</p>
                <ul>
                    <li>Element 1</li>
                    <li>Element 2</li>
                    <li>Element 3</li>
                </ul>
            </td>
        </tr> -->
        </tbody>
    </table>
        </div>

	
	<script src="js/jquery-1.11.0.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/jquery.sticky-sidebar.min.js"></script>      
	<script type="text/javascript" src="js/jquery.restable.min.js"></script>
    <script type="text/javascript" src="js/drawbooks.min.js"></script>
    <script type="text/javascript" src="js/lazyload.min.js"></script>

	<script>
        var g_s_search = '';
        var g_search = [];
        $(function(){
            var h = '';
            var id = 0;
            for(var d of g_datas){
                id++;
                h = h + `<tr>
                <td>`+id+`</td>
                <td><img data-src="`+d.img+`" class='lazyload'></td>
                <td>`+d.title+`</td>
                <td>`+d.lang+`</td>
                <td><a target="_blank" href="`+d.prev+`">go</a></td><td><ol>`
                for(var i=0;i<=d.link.length;i++){
                    h = h + '<li><a target="_blank" href="'+d.link[i]+'">download</a></li>';
                }
                h = h + '</ol></td></tr>';
            }
            $('tbody').html(h);
            $('#table3').ReStable({keepHtml: true, rowHeaders: false});
            $(".lazyload").lazyload({effect: "fadeIn"});
        })


    </script>
    <script type="text/javascript">

        function changeKeyword(){
            value = $('input').val().trim();
            g_s_search = value;
            g_search = [];
            g_i_search = 0;
            if(value !== ''){
                for(var i=0;i<g_datas.length;i++){
                    if(g_datas[i].title.toLocaleLowerCase().indexOf(value.toLocaleLowerCase()) !== -1){
                        g_search.push(i);
                    }
                }
                $('.result-container').html('<span>' + (g_search.length > 0 ? '1/' +g_search.length : 'Not Found!')+'</span>').show();
                if(g_search.length > 0){
                    toItem(g_search[0]);
                }
            }else{
                $('.result-container').html('<span>0</span>').show();
            }
        }

        // for(var i=0;i<g_search.length;i++){
        //     console.log(g_datas[g_search[i]].title);
        // }

        function searchToggle(obj, evt){
            value = $('input').val().trim();

            var container = $(obj).closest('.search-wrapper');

            if(!container.hasClass('active')){
                  container.addClass('active');
            }
            else if(container.hasClass('active') && $(obj).closest('.input-holder').length == 0){
                $('.search_active').removeClass('search_active');
                  container.removeClass('active');
                  // clear input
                  container.find('.search-input').val('');
                  // clear and hide result container when we press close
                  container.find('.result-container').fadeOut(100, function(){$(this).empty();});
            }
            if(value==''){
                evt.preventDefault();
            }

        }

        function submitFn(obj, evt){
            evt.preventDefault();
            if(g_search.length === 0){
               // $('.close').click();
                 return;
            }
            value = $(obj).find('.search-input').val().trim();
            if(value != g_s_search){
                changeKeyword();
                return;
            }
            g_i_search++;
            if(g_i_search > g_search.length - 1){
                g_i_search = 0;
            }
            $(obj).find('.result-container').html('<span>' + (g_i_search+1) + '/' +g_search.length +'</span>').show();

            $(obj).find('.result-container').fadeIn(100);
            toItem(g_search[g_i_search]);


        }

        function toItem(index){
            $('.search_active').removeClass('search_active');
            $(document).scrollTop($('#tabletolist1 ul:eq('+index+')').addClass('search_active').offset().top);
        }
    </script>
</body>
</html>